<!DOCTYPE html>
<html class="no-js" lang="en">
 
	
<!-- header::Start -->
	<head>
		<!-- Use Internet Explorer 9 Standards mode for Eclipse Browser Control - https://www.eclipse.org/swt/faq.php#browsernativeie and https://msdn.microsoft.com/en-us/library/jj676915%28v=vs.85%29.aspx -->
  		<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
		
		<!-- Next 2 http=equiv headers required to disable caching the Eclipse Browser Widget -->
		<meta http-equiv="Pragma" content="no-cache">
  		<meta http-equiv="Expires" content="-1">

		<meta charset="UTF-8"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<meta name="copyright" content="Copyright IBM Corporation 2014" />
		<meta name="abstract" content="IBM Integration Bus V10 Tutorial">
		<meta name="author" content="IBM">
		<meta name="description" content="IBM Integration Bus V10 Tutorial">
		<meta name="keywords" content="keywords" > 
		<meta name="robots" content="index,follow">
		<meta name="source" content="IBM Integration Bus V10 Tutorial" /> 
		
		<title>IBM Integration Bus V10 Tutorial</title>

    	<link rel="stylesheet" href="http://ot4i.github.io/iib-tutorials/css/main.css" />
		<link rel="stylesheet" href="http://ot4i.github.io/iib-tutorials/css/app.css" />
    	
		<script src="http://ot4i.github.io/iib-tutorials/js/json2.js"></script>
		<script src="http://ot4i.github.io/iib-tutorials/js/js2java.js"></script>
		<script src="http://ot4i.github.io/iib-tutorials/js/js2java_steps.js"></script>
		<script src="http://ot4i.github.io/iib-tutorials/js/vendor/modernizr.js"></script>
	</head>
<!-- header::End -->
<!-- body::Start -->
		<body>
  	<!-- body content here -->
	<div class="row">
	  <div class="small-12 medium-12 large-12 columns">
	    <p> </p>
	  </div>
	</div>
	<div class="row">
	  <div class="small-9 medium-9 large-9 columns">
	    <h4 class="title">ESQL Database <action><button class="small radius button" tabindex="0" id="stepsViewDetails" onclick="viewDetails()"> View Details</button> </action></h4>
	  </div>
	  <div class="small-3 medium-3 large-3 columns">
		<a href="javascript:;" onclick="openHelpSystem('/com.ibm.etools.msgbroker.helphome.doc/help_home_msgbroker.htm')" class="small right helplink">IBM Knowledge Center</a> 
	  </div>
	</div> 
	<hr>
	<div class="row">
		<div class="small-10 medium-10 large-10 columns">
		<h5> Learn how to use the compute node to modify a HTTP input using ESQL. </h5>
		</div>
		<div class="small-2 medium-2 large-2 columns">
			<button class="small radius button right" tabindex="0" id="backToGallery" onclick="backToGallery()"> Back To Gallery
			</button>
		</div>
	</div>
	<div class="row">          
		  <div class="small-12 medium-12 large-12 columns">
			<ul class="tabs vertical"> 
				<li class="tab-title tab-title-small active">
				  <a href="javascript:;" onclick="show('panel21')">Create</a> 
				</li>
				<li class="tab-title tab-title-small">
				  <a href="javascript:;" onclick="show('panel31')">Prepare</a> 
				</li>
				<li class="tab-title tab-title-small">
				  <a href="javascript:;" onclick="show('panel41')">Run</a> 
				</li>
			</ul>
			<!-- editing -->
			<div class="tabs-content panel-thin-blue vertical"> 
		    	<div class="content active" id="panel21">
		    		
		    		<div class="small-10 medium-10 large-10 columns divider">
					
				      	<div class="row content-details">
					      	<h4>Import projects</h4>
					        
						    
								<p> When you click Import, an application will be created in your workspace named <span class="application">Database_ESQL</span>. </p>
								
							
								<p> The application <span class="application">Database_ESQL</span> contains a message flow named <span class="msgflow">Database_ESQL.msgflow</span> which contains a HTTPInput node, compute node and a HTTPReply node. </p>
								
							
								<p> The HTTPInput node has a path suffix <code>/Database_ESQL</code>. </p>
								
							
								<p> The compute node has a datasource property of <code>EMPLOYEE</code>, and is configured to interact with an ESQL module named <code>{default}:Database_ESQL_Compute</code>. </p>
								
							
						</div>
						
						<div class="row content-details">
							<h4>Find out more</h4>
							<ul>
							
								
								
								<li> <a href="javascript:;" onclick="openExternalBrowser('https://www.ibm.com/support/knowledgecenter/SSMKHH_10.0.0/com.ibm.etools.mft.doc/bz90800_.htm')" title="Working with LoopBack Connectors Working with LoopBack Connectors">Working with LoopBack Connectors</a> </li>
									
							
								
								
								<li> <a href="javascript:;" onclick="openExternalBrowser('https://developer.ibm.com/integration/blog/2016/10/13/iib-v10-0-0-6-loopback-request-node-tutorial/')" title="More detailed LoopBackRequest node tutorial More detailed LoopBackRequest node Tutorial">More detailed LoopBackRequest node Tutorial</a> </li>
									
							
							</ul>
						</div>
						
					</div>
					
					<div class="small-2 medium-2 large-2 columns">
					
					
					<h4 class="tkaction"><a href="javascript:;" onclick="importArtifacts(); openResource('EventRoutingFlow')"> Import <img class="icon-image" src="http://ot4i.github.io/iib-tutorials/images/icons/ibmdesign/back-right-previous_128-orange.png"></a></h4>
										
				    </div>
					
		    	</div>
		    	<div class="content" id="panel31">
					
					<div class="small-12 medium-12 large-12 columns">
					
						<div class="row content-details">
						  	<h4></h4>
						    
						    
								<p> <h4>Create the DB2 Database</h4> </p>
								
								
									
									<ol>
									
									
										<li> This tutorial assumes that DB2 has been installed on the local machine.
										
										</li>
									
										<li> Open up a DB2 command processor window. Ensure you're in the DB2 environment and if not then type <code>DB2</code>.
										
										</li>
									
										<li> Create a database called <code>EMPLOYEE</code>. The command to create the database is <code> CREATE DB EMPLOYEE </code>.
										
										</li>
									
										<li> Connect to the database using the command <code>CONNECT TO EMPLOYEE</code>.
										
										</li>
									
									
									</ol>
									
								
							
								<p> <h4>Configuring the database</h4> </p>
								
								
									
									<ol>
									
									
										<li> Included in the application files is a ddl file named <code> CreateScripts.ddl </code>.
										
										</li>
									
										<li> Open a command prompt window and run the create scripts file with the following command <code> db2 -tf C:\Users\iibadmin\IBM\IIBT10\workspace\Database_ESQL\CreateScript.ddl </code>. The path will be specific to the system. You can verify that the ddl script created the correct tables by running the <code> LIST TABLES </code> command within the DB2 window. This will show the table name and schema name which in our instance is <code> EMPLOYEE_RECORD </code> <code> IIBADMIN </code>. Running a <code> SELECT * FROM "IIBADMIN"."EMPLOYEE_RECORD" </code> where IIBADMIN is the Schema name and EMPLOYEE_RECORD is the table name, will bring up the table headers and the amount of records within the table. The table will be empty until you complete the flow.
										
										</li>
									
										<li> Once the table has been created you need to run a <code> mqsisetdbparms </code> command. From the Integration Console, run the command <code> mqsisetdbparms TESTNODE_iibadmin -n EMPLOYEE -u iibadmin -p passw0rd </code>. The credentials within the command will need to change to meet the system. After succesfully running the <code> mqsisetdbparms </code> you will need to restart the test node. This can be done by running the following commands <code> mqsistop TESTNODE_iibadmin </code> and <code> mqsistart TESTNODE_iibadmin </code>.
										
										</li>
									
										<li> The Data Sources (ODBC) needs updating to include the database that has just been made. This can be done by opening Control Panel > Administrative Tools > Data Sources (ODBC) > System DSN. Within this tab click the add button where you will find a list of data sources. Select the DB2 driver. Find the database from within the dropdown and set the data source name equal to the database alias.
										
										</li>
									
										<li> This will have correctly configured the database ready to open the flow.
										
										</li>
									
									
									</ol>
									
								
							
						</div>
						
						<div class="row content-details">
							<h4>Find out more</h4>
							<ul>
							
								
								
								<li> <a href="javascript:;" onclick="openExternalBrowser('https://www.ibm.com/support/knowledgecenter/SSMKHH_10.0.0/com.ibm.etools.mft.doc/bz90800_.htm')" title="Working with LoopBack Connectors Working with LoopBack Connectors">Working with LoopBack Connectors</a> </li>
									
							
								
								
								<li> <a href="javascript:;" onclick="openExternalBrowser('https://developer.ibm.com/integration/blog/2016/10/13/iib-v10-0-0-6-loopback-request-node-tutorial/')" title="More detailed LoopBackRequest node tutorial More detailed LoopBackRequest node Tutorial">More detailed LoopBackRequest node Tutorial</a> </li>
									
							
							</ul>
						</div>
							
					</div>
					
		    	</div>
		    	<div class="content" id="panel41">
		    		
		    		<div class="small-10 medium-10 large-10 columns divider">
					
				    	<div class="row content-details">
					      	<h4>Use the Flow Exerciser to test the tutorial scenario</h4>
					        
						    
								<p> Having prepared the scenario, the following steps describe how to use the Flow Exerciser to test the message flow: </p>
								
								
									
									<ol>
									
									
										<li> Open <span class="resource">Database_ESQL.msgflow</span>.
										
										</li>
									
										<li> Click the Flow Exerciser icon <img src="http://ot4i.github.io/ot4i.tutorials//dist/images/icons/iib/startFlowExerciser.png" alt> to start testing the flow
										
										</li>
									
										<li> Click the Send Message icon <img src="http://ot4i.github.io/ot4i.tutorials/dist/images/icons/iib/sendMessage.png" alt>.
										
										</li>
									
										<li> Select the saved message which has been provided, named <span class="resource">InputMessage</span>, and click Send:<br><span class="resource">{ "FIRSTNAME" : "John", "LASTNAME" : "Doe", "WORKDEPT" : "ABC", "JOB" : "PROGRAMMER", "SALARY" : "152750.00"}</span>
										
										</li>
									
										<li> A response will be shown saying that the message succesfully navigated the flow. Return to the DB2 window and run the command <code> SELECT * FROM "IIBADMIN"."EMPLOYEE_RECORD"</code>. The database will now be updated and inlcude the record which was input by the compute node.
										
										</li>
									
										<li> After you close the dialog, the paths taken through the messageflow are highlighted. Click on the message icon on each connection to see how the tree has been updated by each node.
										
										</li>
									
									
									</ol>
									
								
							
								<p> This tutorial has shown the compute node receiving and changing a HTTPInput using ESQL and populating a DB2 database with the output. </p>
								
							
						</div>
						
						<div class="row content-details"> 	
							<h4>Find out more</h4>
							<ul>
							
								
								
								<li> <a href="javascript:;" onclick="openExternalBrowser('https://www.ibm.com/support/knowledgecenter/SSMKHH_10.0.0/com.ibm.etools.mft.doc/bz90800_.htm')" title="Working with LoopBack Connectors Working with LoopBack Connectors">Working with LoopBack Connectors</a> </li>
									
							
								
								
								<li> <a href="javascript:;" onclick="openExternalBrowser('https://developer.ibm.com/integration/blog/2016/10/13/iib-v10-0-0-6-loopback-request-node-tutorial/')" title="More detailed LoopBackRequest node tutorial More detailed LoopBackRequest node Tutorial">More detailed LoopBackRequest node Tutorial</a> </li>
									
							
							</ul>
						</div>
							
					</div>
					
					<div class="small-2 medium-2 large-2 columns">
					
					
					
					
					
					<h4 class="tkaction"><a href="javascript:;" onclick="cleanUp()" title="Clean up and remove any changes in your workspace made by the tutorial."> Clean Up <img class="icon-image" src="http://ot4i.github.io/iib-tutorials/images/icons/ibmdesign/close-cancel-error_128-red.png"></a></h4>
				    
					
				    </div>
					
				</div>	
			</div> <!-- tab-content -->
		</div> <!-- columns -->
	  </div> <!-- row --></body>
		<script src="http://ot4i.github.io/iib-tutorials/js/vendor/jquery.js"></script>
		<script src="http://ot4i.github.io/iib-tutorials/js/vendor/foundation.min.js"></script>
		<script src="http://ot4i.github.io/iib-tutorials/js/main.js"></script>
	</body>
<!-- body::End -->

</html>